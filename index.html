<!DOCTYPE html>
<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.12.0"> </script>
</head>

<body>
<script>
async function show() {
    var inputs = [];
	inputs[0] = document.getElementById("slider1").value;
    inputs[1] = document.getElementById("slider2").value;
	
    
	const generator = await tf.loadModel('https://gippoo.github.io/facegenerator/generator.json');
    var tensorinputs = tf.tensor2d([inputs]);
    
    var genimage = generator.predict(tensorinputs);
    var genimgdata = genimage.dataSync();
    
    
    var i;
    for (i = 0; i < 9408; i++) {
    	genimgdata[i] = Math.floor((1 - genimgdata[i])*255);
    }
    
    var arr = [];
    for (i = 0; i < 12544; i++) {
    	arr.push(255);
    }
    
    
    var s = 0, d = 0;
    while (d < 12544) {
    	arr[d++] = genimgdata[s++];
        arr[d++] = genimgdata[s++];
        arr[d++] = genimgdata[s++];
        d++;
    }
    
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var idata = ctx.createImageData(56, 56);
    idata.data.set(arr);
    ctx.putImageData(idata, 0, 0);
	  
    tf.disposeVariables();
	 
       
}
function showVal1() {
	var a = document.getElementById("slider1").value;
    document.getElementById("num1").innerHTML = a;
}
	
function showVal2() {
	var b = document.getElementById("slider2").value;
    document.getElementById("num2").innerHTML = b;
}
	
</script>


<h1>02/Ichigo Face Generator</h1>
<p>Type 2 numbers separated by a comma in the text box below.</p>
<p>The computer will try to create a 56x56 image of a (blurry) face based on the 2 numbers. <b>Numbers between 0-100 seem to work best.</b></p>
  <p>Number1: <span id='num1'>50</span></p>
  <input type="range" min="1" max="100" id='slider1' onchange="showVal1(), show();">
    <p>Number2: <span id='num2'>50</span></p>
  <input type="range" min="1" max="100" id='slider2' onchange="showVal2(), show();">

<p id="numbers"></p>
<canvas id="myCanvas" width="56" height="56">
</canvas>

<p><b>NOTE: There may be issues if you are on a mobile device.</b></p>
<p><i>Done by training a multilayer autoencoder to encode an image to 2 values. Then threw away the encoder portion leaving the decoder.</i></p>

	
</body>
</html>
